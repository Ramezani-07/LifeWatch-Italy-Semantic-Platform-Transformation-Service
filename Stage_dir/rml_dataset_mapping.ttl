@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix rml: <http://semweb.mmlab.be/ns/rml#>.
@prefix ql: <http://semweb.mmlab.be/ns/ql#>.
@prefix lw: <https://kos.lifewatch.eu/ontologies/lw/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix : <http://semantics.lifewatchitaly.eu/resource#> .
@base <http://semantics.lifewatchitaly.eu/resource#> .


<#ObservationCollection> a rr:TriplesMap;
    rml:logicalSource [
        rml:source "Stage_dir/transformed_dataset_prepared_for_mapping.csv" ;
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "http://semantics.lifewatchitaly.eu/resource#dcat:Dataset-id:{datasetId}";
        rr:class lw:ObservationCollection;
    ];
    rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [ rr:column "datasetLabel"];
    ];
    rr:predicateObjectMap [
        rr:predicate dct:identifier;
        rr:objectMap [ rr:column "datasetId"];
    ];


    rr:predicateObjectMap [
        rr:predicate lw:hasMember;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:Observation-id:{observationId}"];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:hasEntity;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:FeatureOfInterest-id:{featureOfInterestId}"];
    ];
    rr:predicateObjectMap[
        rr:predicate lw:hasObservableProperty ;
        rr:objectMap [rr:template "http://semantics.lifewatchitaly.eu/resource#lw:ObservableProperty-id:{propertyName}"];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:hasDate;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:TemporalEntity-id:{date}"];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:hasPoint;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:GeoPoint-id:{point}"];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:hasTaxon;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:Taxon-id:{taxonRank}-{taxon}"];
    ];
.



<#Observation> a rr:TriplesMap;
    rml:logicalSource [
        rml:source "Stage_dir/transformed_dataset_prepared_for_mapping.csv" ;
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "http://semantics.lifewatchitaly.eu/resource#lw:Observation-id:{observationId}";
        rr:class owl:NamedIndividual;
        rr:class lw:Observation;
    ];
    rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [ rr:column "observationId"];
    ];

    rr:predicateObjectMap [
        rr:predicate lw:isMemberOf;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#dcat:Dataset-id:{datasetId}"];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:hasFeatureOfInterest;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:FeatureOfInterest-id:{featureOfInterestId}"];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:observedProperty;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:ObservableProperty-id:{propertyName}"];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:observedAt;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:GeoPoint-id:{point}"];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:dateTime;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:TemporalEntity-id:{date}"];
    ];


    rr:predicateObjectMap [
        rr:predicate lw:hasSimpleResult;
        rr:objectMap [ rr:column "measurementValue"];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:unitOfMeasurement;
        rr:objectMap [ rr:column "measurementUnit"];
    ];

    rr:predicateObjectMap [
        rr:predicate lw:datasetName;
        rr:objectMap [ rr:column "datasetName" ];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:ECHabitatDirective;
        rr:objectMap [ rr:column "ECHabitatDirective" ];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:endemisms;
        rr:objectMap [ rr:column "endemisms" ];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:iucnRedListSpeciesStatus;
        rr:objectMap [ rr:column "iucnRedListSpeciesStatus" ];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:biogeographicalRegion;
        rr:objectMap [ rr:column "biogeographicalRegion" ];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:associatedReferences;
        rr:objectMap [ rr:column "associatedReferences" ];
    ];.



<#FeatureOfInterest> a rr:TriplesMap;
    rml:logicalSource [
        rml:source "Stage_dir/transformed_dataset_prepared_for_mapping.csv" ;
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "http://semantics.lifewatchitaly.eu/resource#lw:FeatureOfInterest-id:{featureOfInterestId}";
        rr:class owl:NamedIndividual;
        rr:class lw:FeatureOfInterest;
        rr:class lw:OrganismalEntity;
    ];
    rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [ rr:column "featureOfInterestId"];
    ];


    rr:predicateObjectMap [
        rr:predicate lw:hasBiologicalClassification;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:Taxon-id:{taxonRank}-{taxon}"];
    ];

    rr:predicateObjectMap [
        rr:predicate lw:acceptedNameUsage;
        rr:objectMap [ rr:column "acceptedNameUsage" ];
    ];.



<#ObservableProperty> a rr:TriplesMap;
    rml:logicalSource [
        rml:source "Stage_dir/transformed_dataset_prepared_for_mapping.csv" ;
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "http://semantics.lifewatchitaly.eu/resource#lw:ObservableProperty-id:{propertyName}";
        rr:class owl:NamedIndividual;
        rr:class lw:ObservableProperty;
    ];
    rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [ rr:column "propertyLabel"];
    ];


    rr:predicateObjectMap [
        rr:predicate dct:definition;
        rr:objectMap [ rr:column "propertyDefinition"];
    ];
    rr:predicateObjectMap [
        rr:predicate dct:type;
        rr:objectMap [ rr:column "propertyUrl"];
    ];
.



<#Location> a rr:TriplesMap;
    rml:logicalSource [
        rml:source "Stage_dir/transformed_dataset_prepared_for_mapping.csv" ;
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "http://semantics.lifewatchitaly.eu/resource#lw:GeoPoint-id:{point}";
        rr:class owl:NamedIndividual;
        rr:class lw:GeoPoint;
    ];
    rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [ rr:column "point"];
    ];

    rr:predicateObjectMap [
        rr:predicate lw:decimalLatitude;
        rr:objectMap [ rr:column "decimalLatitude" ];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:decimalLongitude;
        rr:objectMap [ rr:column "decimalLongitude" ];
    ];.



<#ObservationDate> a rr:TriplesMap;
    rml:logicalSource [
        rml:source "Stage_dir/transformed_dataset_prepared_for_mapping.csv" ;
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "http://semantics.lifewatchitaly.eu/resource#lw:TemporalEntity-id:{date}";
        rr:class owl:NamedIndividual;
        rr:class lw:TemporalEntity;
    ];
    rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [ rr:column "date"];
    ];
.



<#Taxon> a rr:TriplesMap;
    rml:logicalSource [
        rml:source "Stage_dir/transformed_dataset_prepared_for_mapping.csv" ;
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "http://semantics.lifewatchitaly.eu/resource#lw:Taxon-id:{taxonRank}-{taxon}";
        rr:class owl:NamedIndividual;
        rr:class lw:Taxon;
    ];
    rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [ rr:column "taxon"];
    ];


    rr:predicateObjectMap [
        rr:predicate lw:isOfRank;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:TaxonRank-id:{taxonRank}"];
    ];
    rr:predicateObjectMap [
        rr:predicate lw:isBiologicalClassificationFor;
        rr:objectMap [ rr:template "http://semantics.lifewatchitaly.eu/resource#lw:FeatureOfInterest-id:{featureOfInterestId}"];
    ];
.



<#TaxonRank> a rr:TriplesMap;
    rml:logicalSource [
        rml:source "Stage_dir/transformed_dataset_prepared_for_mapping.csv" ;
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "http://semantics.lifewatchitaly.eu/resource#lw:TaxonRank-id:{taxonRank}";
        rr:class owl:NamedIndividual;
        rr:class lw:TaxonRank;
    ];
    rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [ rr:column "taxonRank"];
    ];
.